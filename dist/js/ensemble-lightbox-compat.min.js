!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.ensemble=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";
/*!
   * loltgt ensemble.Compo
   *
   * @version 0.0.1
   * @copyright Copyright (C) Leonardo Laureti
   * @license MIT License
   */function t(e,n,i){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,n,i||e)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t,n,i,o,r,s){try{var a=e[r](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,l,"next",e)}function l(e){a(r,i,o,s,l,"throw",e)}s(void 0)}))}}function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=e.Lightbox=void 0;var v=/html|head|body|meta|link|style|script/i,y=/(<(html|head|body|meta|link|style|script)*>)/i,m=/attributes|classList|innerHTML|outerHTML|nodeName|nodeType/,g=function(){function e(t,n,i,o){if(f(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";var r=this._ns="_"+t,s=i?n.toString():"div";if(v.test(s))throw new Error("ensemble.Compo error: The tag name provided ('".concat(s,"') is not a valid name."));var a=this[r]=document.createElement(s);if(this[r].__compo=this,o&&"object"==h(o))for(var l in o){var u=l.toString();if(m.test(u))throw new Error("ensemble.Compo error: The property name provided ('".concat(u,"')' is not a valid name."));if(0===u.indexOf("on")&&o[u])a[u]=o[u].bind(this);else if("object"!=h(o[u]))a[u]=o[u];else if("children"===u&&"object"==h(o[u])&&o[u].length){var p,d=c(o.children);try{for(d.s();!(p=d.n()).done;){var y=p.value,g=y.tag,b=y.name,k=y.props;this.append(new e(t,g,b,k))}}catch(e){d.e(e)}finally{d.f()}}}if(0!=i&&1!=i){var w=a.className;a.className=t+"-"+n,i&&(a.className+=" "+t+"-"+i),w&&(a.className+=" "+w)}}return d(e,[{key:"install",value:function(e,t){return"function"==typeof t&&t.call(this,this[this._ns]),!!e.appendChild(this[this._ns])}},{key:"uninstall",value:function(e,t){return"function"==typeof t&&t.call(this,this[this._ns]),!!e.removeChild(this[this._ns])}},{key:"up",value:function(e,t){return"function"==typeof t&&t.call(this,this[this._ns]),!!e.replaceWith(this[this._ns])}},{key:"append",value:function(e){var t=this._ns;return!!this[t].appendChild(e[t])}},{key:"prepend",value:function(e){var t=this._ns;return!!this[t].prependChild(e[t])}},{key:"remove",value:function(e){var t=this._ns;return!!this[t].removeChild(e[t])}},{key:"replace",value:function(e){}},{key:"clone",value:function(){}},{key:"inject",value:function(e){if(e instanceof Element==!1||v.test(e.tagName)||y.test(e.innerHTML))throw new Error("ensemble.Compo error: The remote object could not be resolved into a valid node.");this.empty(),this[this._ns].appendChild(e)}},{key:"empty",value:function(){for(;this.first;)this.remove(this.first)}},{key:"hasAttr",value:function(e){return this[this._ns].hasAttribute(e)}},{key:"getAttr",value:function(e){return this[this._ns].getAttribute(e)}},{key:"setAttr",value:function(e,t){this[this._ns].setAttribute(e,t)}},{key:"delAttr",value:function(e){this[this._ns].removeAttribute(e)}},{key:"getStyle",value:function(e){return window.getComputedStyle(this[this._ns])[e]}},{key:"show",value:function(){this[this._ns].hidden=!1}},{key:"hide",value:function(){this[this._ns].hidden=!0}},{key:"enable",value:function(){this[this._ns].disabled=!1}},{key:"disable",value:function(){this[this._ns].disabled=!0}},{key:"node",get:function(){return console.warn("ensemble.Compo","Direct access to the Element node is strongly discouraged."),this[this._ns]}},{key:"parent",get:function(){var e=this._ns;return this[e].parentElement&&"__compo"in this[e].parentElement?this[e].parentElement.__compo:null}},{key:"children",get:function(){return Array.prototype.map.call(this[this._ns].children,(function(e){return e.__compo}))}},{key:"first",get:function(){var e=this._ns;return this[e].firstElementChild?this[e].firstElementChild.__compo:null}},{key:"last",get:function(){var e=this._ns;return this[e].lastElementChild?this[e].lastElementChild.__compo:null}},{key:"previous",get:function(){var e=this._ns;return this[e].previousElementSibling?this[e].previousElementSibling.__compo:null}},{key:"next",get:function(){var e=this._ns;return this[e].nextElementSibling?this[e].nextElementSibling.__compo:null}},{key:"classList",get:function(){return this[this._ns].classList}},{key:Symbol.toStringTag,get:function(){return"ensemble.Compo"}}],[{key:"isCompo",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),b=function(){function e(t,n){if(f(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";n&&"object"===h(n)&&Object.assign(this,{},n),this[this._ns="_"+t]={ns:t}}var t,n,i;return d(e,[{key:"compo",value:function(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this[this._ns].ns;return i=o?{ns:a,tag:e,name:t,props:n,fresh:r,stale:s}:new g(a,e,t,n),r&&"function"==typeof r&&(i.fresh=n.onfresh=r),s&&"function"==typeof s&&(i.stale=n.onstale=s),i}},{key:"render",value:(i=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this[n=this._ns][t]&&this[n][t].rendered||(this[n][t]={rendered:!0,fresh:this[t].fresh,stale:this[t].stale,params:this[t]},this[t]=new g(this[t].ns,this[t].tag,this[t].name,this[t].props)),this[n][t].fresh();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"stale",value:(n=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this[n=this._ns][t]&&this[n][t].rendered&&this[n][t].stale();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"reflow",value:(t=l(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this._ns,n?this[i][t]=this.compo(this[i][t].params.ns,this[i][t].params.name,this[i][t].params.props):this[i][t]&&this[i][t].rendered&&this[i][t].fresh();case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:Symbol.toStringTag,get:function(){return"ensemble.Data"}}],[{key:"isData",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),k=function(){function e(t,n,i){if(f(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";var o=this._ns="_"+t;i=(g.isCompo(i)?i.node:i)||document,this[o]={name:n,node:i}}return d(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this[this._ns].node.addEventListener(this[this._ns].name,e,t)}},{key:"remove",value:function(e){this[this._ns].node.removeEventListener(this[this._ns].name,e)}},{key:Symbol.toStringTag,get:function(){return"ensemble.Event"}}],[{key:"isEvent",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),w=function(e){n(i,e);var t=o(i);function i(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,i),(n=t.call(this))._bindings(),n.options=n.defaults(n._defaults(),o),Object.freeze(n.options),n.element=e,n}return d(i,[{key:"_defaults",value:function(){return{ns:"modal",root:"body",fx:!0,windowed:!1,cloning:!0,backClose:!1,keyboard:!0,close:{onclick:this.close,innerText:"×",ariaLabel:"Close"},onOpen:function(){},onClose:function(){},onShow:function(){},onHide:function(){},onContent:function(){}}}},{key:"_bindings",value:function(){this.open=this.binds(this.open),this.close=this.binds(this.close),this.backx=this.binds(this.backx),this.keyboard=this.binds(this.keyboard)}},{key:"generator",value:function(){var e=this.options,t=this.box=this.compo("dialog",!0,{className:e.ns,hidden:!0,ariaModal:!0,role:"dialog",onclick:e.backClose?this.backx:null}),n=this.cnt=this.compo("content"),i=this.compo("button","close",e.close);return t.append(n),e.windowed?(t.classList.add(e.ns+"-windowed"),n.append(i)):t.append(i),e.fx&&t.classList.add(e.ns+"-fx"),this.root=this.selector(e.root),this.built=!0,t}},{key:"populate",value:function(e){var t=this.content(this.element);this.cnt.append(t)}},{key:"resume",value:function(e){console.log("resume",e)}},{key:"content",value:function(e,t){var n=this.options,i=this.compo("object"),o=(t=void 0!==t?t:n.cloning)?this.cloneNode(e,!0):e;return n.onContent.call(this,this,i,o),o&&i.inject(o),i}},{key:"destroy",value:function(){this.box.remove(),this.built=!1}},{key:"open",value:function(e,t){if(this.event(e),!this.opened){var n=this.options;this.built?this.resume(t):(this.generator(),this.populate(t)),this.opened=!0,n.onOpen.call(this,this,t,e),this.show(t),n.keyboard&&this.event("keydown").add(this.keyboard),console.log("open",this)}}},{key:"close",value:function(e,t){if(this.event(e),this.opened){var n=this.options;this.opened=!1,n.onClose.call(this,this,t,e),this.hide(t),n.keyboard&&this.event("keydown").remove(this.keyboard),console.log("close",this)}}},{key:"show",value:function(e){var t=this.options,n=this.root,i=this.box;i.install(n),this.delay((function(){i.show(),t.onShow.call(self,self,e)}))}},{key:"hide",value:function(e){var t=this.options,n=this.root,i=this.box;i.hide(),this.delay((function(){i.uninstall(n),t.onHide.call(self,self,e)}),i,300)}},{key:"backx",value:function(e){this.event(e),e.target!=this.box&&e.target!=this.cnt||this.close(e)}},{key:"keyboard",value:function(e){this.event(e),27===(e.keyCode||0)&&this.close(e)}}]),i}(function(){function e(){if(f(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new."}return d(e,[{key:"defaults",value:function(e,t){var n={};for(var i in e)null!=e[i]&&"object"===h(e[i])?n[i]=Object.assign(e[i],t[i]):n[i]=void 0!==t[i]?t[i]:e[i];return n}},{key:"compo",value:function(e,t,n){return e?new g(this.options.ns,e,t,n):g}},{key:"data",value:function(e){return e?new b(this.options.ns,e):b}},{key:"event",value:function(e,t){return"string"==typeof e?new k(this.options.ns,e,t):e?(e.preventDefault(),void e.target.blur()):k}},{key:"selector",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||document,n?t.querySelectorAll(e):t.querySelector(e)}},{key:"appendNode",value:function(e,t){return!!e.appendChild(t)}},{key:"prependNode",value:function(e,t){return!!e.prependChild(t)}},{key:"removeNode",value:function(e,t){return!!e.removeChild(t)}},{key:"cloneNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.cloneNode(t)}},{key:"hasAttr",value:function(e,t){return e.hasAttribute(t)}},{key:"getAttr",value:function(e,t){return e.getAttribute(t)}},{key:"setAttr",value:function(e,t,n){e.setAttribute(t,n)}},{key:"delAttr",value:function(e,t){e.removeAttribute(t)}},{key:"binds",value:function(e){var t=this;return function(n){e.call(t,n,this)}}},{key:"delay",value:function(e,t,n){var i=t?this.timing(t):0;setTimeout(e,i||n)}},{key:"timing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transitionDuration",n=g.isCompo(e)?e.getStyle(t):window.getComputedStyle(e)[t];return n&&(n=n.indexOf("s")?1e3*parseFloat(n):parseInt(n)),n||0}}]),e}());
/*!
   * loltgt ensemble.Lightbox
   *
   * @version 0.0.1
   * @copyright Copyright (C) Leonardo Laureti
   * @license MIT License
   */
e.Modal=w;var _=function(e){n(r,e);var i=o(r);function r(){return f(this,r),i.apply(this,arguments)}return d(r,[{key:"_defaults",value:function(){return Object.assign(t(s(r.prototype),"_defaults",this).call(this),{selector:"",contents:null,navigation:!0,captioned:!0,infinite:!0,autoDiscover:!0,autoHide:"navigation",overlayed:!1,checkOrigin:!0,prev:{onclick:this.prev,innerText:"<",ariaLabel:"Previous"},next:{onclick:this.next,innerText:">",ariaLabel:"Next"},onStep:function(){},onSlide:function(){},onCaption:function(){}})}},{key:"_bindings",value:function(){t(s(r.prototype),"_bindings",this).call(this),this.add=this.binds(this.add),this.remove=this.binds(this.remove),this.prev=this.binds(this.prev),this.next=this.binds(this.next)}},{key:"generator",value:function(){var e=t(s(r.prototype),"generator",this).call(this),n=this.cnt,i=this.options,o=this.gallery=this.compo("gallery");if(n.append(o),e.classList.add(i.ns+"-lightbox"),i.navigation){var a=this.nav=this.data(!0),l=a.wrap=this.compo("nav"),c=a.prev=this.compo("button","prev",i.prev),u=a.next=this.compo("button","next",i.next);l.append(c),l.append(u)}if(i.captioned){var h=this.captions=this.data(!0);h.wrap=this.compo("captions")}if(i.overlayed){var f=i.overlayed.toString().match(/captions|navigation/);e.classList.add(i.ns+"-overlayed"),f&&e.classList.add(i.ns+"-overlayed-"+overlayed[0])}if(i.autoHide){var p=i.autoHide.toString().match(/captions|navigation/);e.classList.add(i.ns+"-autohide"),p&&e.classList.add(i.ns+"-autohide-"+p[0])}i.windowed?(i.navigation&&n.append(a.wrap),i.captioned&&n.append(h.wrap)):(i.navigation&&e.append(a.wrap),i.captioned&&e.append(h.wrap))}},{key:"populate",value:function(e){console.log("populate",e);var t,n=this.options;n.contents&&"object"==h(n.contents)?t=n.contents:n.selector&&(t=this.selector(n.selector,this.element,!0));var i,o=c(t=this.contents=this.prepare(t));try{for(o.s();!(i=o.n()).done;){var r=i.value,s=this.content(r);e&&e===s.ref&&(this.index=t.indexOf(s),this.current=s),this.add(s)}}catch(e){o.e(e)}finally{o.f()}this.current=this.current||t[0],this.index=this.index||0,this.slide(0),n.navigation&&this.navigation(),n.captioned&&this.caption()}},{key:"resume",value:function(e){console.log("resume",e);var t,n=this.options,i=this.contents,o=c(i);try{for(o.s();!(t=o.n()).done;){var r=t.value;r.wrap.hide(),e&&e===r.ref&&(this.index=i.indexOf(r),this.current=r)}}catch(e){o.e(e)}finally{o.f()}this.current=this.current||i[0],this.index=this.index||0,this.slide(0),n.navigation&&this.navigation(),n.captioned&&this.caption()}},{key:"content",value:function(e,t){var n,i=this.options,o=this.compo("object");o.hide();var r=(n="string"==typeof e?this.data({src:e}):e).src,s=n.type;s&&(s=(s=s.match(/(^image|video|audio)|(pdf$)/))?s[0]:"");var a,l=/^https?:\/\//.test(r),c=!1;(i.autoDiscover&&r&&!s&&(/\.jpg|\.jpeg|\.png|\.apng|\.gif|\.webp|\.avif|\.bmp|\.svg$/i.test(r)?s="image":/\.pdf$/.test(r)?s="pdf":/\.mp4|\.webm|\.ogv|\.m4v|\.hevc|\.ivf|\.obu|\.ismv|\.mkv$/i.test(r)?s="video":/\.mp3|\.opus|\.ogg|\.m4a|\.aac|\.flac|\.wav|\.weba|\.mka$/i.test(r)?s="audio":/^data:image\/jpeg|png|apng|gif|webp|avif|bmp|svg\+xml/.test(r)&&(c=!0,s="image")),"pdf"===s&&(s="iframe",a="pdf"),i.checkOrigin&&r&&l&&!c)&&(("null"!=window.origin?window.origin:window.location.origin)!=new URL(r).origin&&(s=""));if(r&&!s)if("#"===r[0]){var u=this.selector(r);u&&(n.node=u,s=/iframe|img|picture|video|audio/i.test(u.nodeName)?/img|picture/i.test(u.nodeName)?"image":u.nodeName.toLowerCase():"element")}else s="iframe";"element"===s&&(t=void 0!==t?t:i.cloning,n.node=t?this.cloneNode(n.node,!0):n.node),n.ref=n.ref||null,n.type=s,n.src=r,i.onContent.call(this,this,n),s&&o.classList.add(i.ns+"-"+s),a&&o.classList.add(i.ns+"-"+a);var h=this.inner(n);return n.fresh=function(){n.node&&n.inner.inject(n.node),n.wrap.show()},n.stale=function(){n.node&&n.inner.empty(),n.wrap.hide()},n.wrap=o,n.inner=n.compo(h.tag,h.name,h.props,!0,n.fresh,n.stale),n}},{key:"inner",value:function(e){var t=e.type,n=!0,i={};for(var o in e)/ref|src|type|sources|subtitles|children/.test(o)||"_"==o[0]||(i[o]=e[o]);switch(e.src&&(i.src=e.src),e.type){case"image":if(t="img",e.sources||e.children)if(t="picture",i.children=[],e.sources&&"object"==h(e.source)){var r,s=c(e.sources);try{for(s.s();!(r=s.n()).done;){var a=r.value;i.children.push({tag:"source",name:!0,props:a})}}catch(e){s.e(e)}finally{s.f()}}else if(e.children&&e.children.length){var l,u=c(e.children);try{for(u.s();!(l=u.n()).done;){var f=l.value,p=f.tagName.toLowerCase();"source"==p&&"img"==p&&i.children.push({tag:p,name:!0,props:f.attributes})}}catch(e){u.e(e)}finally{u.f()}}break;case"video":case"audio":if(i.controls=!e.controls||e.controls,i.children=[],e.sources&&"object"==h(e.sources)){var d,v=c(e.sources);try{for(v.s();!(d=v.n()).done;){var y=d.value;i.children.push({tag:"source",name:!0,props:y})}}catch(e){v.e(e)}finally{v.f()}if(e.subtitles&&"object"==h(e.subtitles)){var m,g=c(e.subtitles);try{for(g.s();!(m=g.n()).done;){var b=m.value;i.children.push({tag:"track",name:!0,props:b})}}catch(e){g.e(e)}finally{g.f()}}}else if(e.children&&e.children.length){var k,w=c(e.children);try{for(w.s();!(k=w.n()).done;){var _=k.value,x=_.tagName.toLowerCase();"source"==x&&"track"==x&&i.children.push({tag:x,name:!0,props:_.attributes})}}catch(e){w.e(e)}finally{w.f()}}break;case"iframe":if(i.frameBorder=0,!i.src)return null;break;default:t="div",n="custom-element"}return{tag:t,name:n,props:i}}},{key:"prepare",value:function(e){var t=[];if(e&&"object"==h(e)&&e.length){var n,i=c(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("object"==h(o)&&"nodeName"in o){var r=this.data(!0),s=o.dataset;if(Object.assign(r,s),r.ref=o,s.sources)try{r.sources=JSON.parse(s.sources)}catch(e){}if(o.href)r.src=o.href;else if(s.href)r.src=s.href;else if(/iframe|img|picture|video|audio/i.test(o.nodeName)){var a=o.nodeName.toLowerCase();/img|picture/.test(a)?r.type="image":r.type=a,"iframe"!=a&&o.children&&o.children.length&&(r.children=o.children)}else r.type="element",r.node=o;s.caption&&(r.caption=s.caption),t.push(r)}else"string"==typeof o?t.push(o):"type"in o&&/(^element|iframe|image|video|audio|pdf)/.test(o.type)?t.push(this.data(o)):t.push(this.data(!0))}}catch(e){i.e(e)}finally{i.f()}}return t}},{key:"add",value:function(e){this.gallery.append(e.wrap),this.options.navigation&&this.navigation()}},{key:"remove",value:function(e){this.gallery.remove(e.wrap),this.options.navigation&&this.navigation()}},{key:"prev",value:function(e){this.event(e),this.slide(-1)}},{key:"next",value:function(e){this.event(e),this.slide(1)}},{key:"slide",value:function(e){var t=this.options;if(t.infinite||0==this.way||this.way!==e){var n=this.contents,i=this.index,o=this.current,r=o;if(t.onStep.call(this,this,o,e),0!=e){var s=n.length-1,a=-1===e?n[i-1]:n[i+1],l=-1===e?n[s]:n[0];r=a||l,i=a?-1===e?i-1:i+1:-1===e?s:0,o.stale("inner")}if(!t.infinite){var c=0;r.wrap.previous?r.wrap.next||(c=1):c=-1,this.way=parseInt(c),t.navigation&&this.navigation(c)}r.render("inner"),r.wrap.append(r.inner),t.onSlide.call(this,this,o,e,o.wrap!=r.wrap?r.wrap:null),this.delay((function(){0!=e&&o.wrap.remove(o.inner)}),o.wrap),this.index=i,this.current=n[i],t.captioned&&this.caption()}}},{key:"navigation",value:function(e){var t=this.nav;if(this.contents.length>1){if(t.wrap.show(),!this.options.infinite&&void 0!==e)switch(e){case-1:t.prev.disable(),t.next.enable();break;case 1:t.prev.enable(),t.next.disable();break;default:t.prev.enable(),t.next.enable()}}else t.wrap.hide()}},{key:"caption",value:function(e){var t=this.options,n=this.captions,i=this.current;if(n.wrap.empty(),!t.onCaption(this,this,i,e)){if(!e)if(i.caption)e=i.caption;else if(t.selector){var o=i.ref;if(this.hasAttr(o,"title"))e=this.getAttr(o,"title");else if("image"===i.type){e=this.selector("img",o).alt}}if(e){var r,s=c(e=e.split(/\n\n|\r\n\r\n/));try{for(s.s();!(r=s.n()).done;){var a=r.value,l=this.compo("p",!0,{innerText:a});n.wrap.append(l)}}catch(e){s.e(e)}finally{s.f()}}}}},{key:"keyboard",value:function(e){switch(t(s(r.prototype),"keyboard",this).call(this,e),e.keyCode||0){case 37:this.prev(e);break;case 39:this.next(e)}}}]),r}(w);e.Lightbox=_}));
//# sourceMappingURL=ensemble-lightbox-compat.min.js.map
